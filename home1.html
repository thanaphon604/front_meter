<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
    <title>ระบบบันทึกหน่วยไฟฟ้าอัจฉริยะ</title>
    <link rel="stylesheet" href="css/home.css">
</head>

<body>
    <div class="container-fluid" id="Head">
        <div class="class col-sm-12 ">
            <div class="row justify-content-center">
                <ul>
                    <img src="images/Logo_Intregrate.png" width="90px" height="90px" alt="">
                </ul>
                <ul>
                    <img src="images/lg_wu.png" width="80px" height="90px" alt="">
                </ul>
                <div>
                    <ul>
                        <h1>ระบบบันทึกหน่วยไฟฟ้าอัจฉริยะ </h1>
                    </ul>
                    <ul>
                        <h5>(Smart energy monitoring system)</h2>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-light bg-light navbar navbar-dark bg-dark">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="home.html">ผังห้อง
                        <span class="sr-only"></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="UseElectricity3.html">การใช้ไฟฟ้า</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="UseElectricity4.html">วิเคราะห์การใช้พลังงาน</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="Invoice5.html">ออกใบเเจ้งหนี้&ใบเสร็จ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="setting.html">จัดการหอพัก</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Log out</button>
            </form>
        </div>
    </nav>
    <!--
  Extra small <576px   col
  small > 576      px  col-sm
  mediu, >= 768        col-md
  Large >=992 px       com-lg
  Extra Large >= 120px col-xl
-->

    <div class="container-fluid">
        <div class="row">

            <div class="col-12 order-2 order-sm-2 order-md-2 order-lg-2 col-lg-6  col-xl-7 order-xl-1 ">

                <br>
                <p>ชั้น 1</p>
                <hr style="border: 1px solid black;">
                <div class="row">

                    <div class="bigroom " style="background-color: pink">
                        <div>
                            <a class="link 001 1 A">001</a>
                        </div>
                        <div class="room" style="background-color: black">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    
                    <div class="bigroom">
                        <div>
                            <a class="link 002 1 A">002</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    <div class="bigroom">
                        <div>
                            <a class="link 003 1 A">003</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    <div class="bigroom">
                        <div>
                            <a class="link 004 1 A">004</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    <div class="bigroom">
                        <div>
                            <a class="link 005 1 A">005</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    <div class="bigroom">
                        <div>
                            <a class="link 006 1 A">006</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>


                    <div class="bigroom">
                        <div>
                            <a class="link 007 1 A">007</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>


                    
                    <div class="bigroom">
                        <div>
                            <a class="link 008 1 A">008</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    <div class="bigroom">
                        <div>
                            <a class="link 009 1 A">009</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    <div class="bigroom">
                        <div>
                            <a class="link 010 1 A">010</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    <div class="bigroom">
                        <div>
                            <a class="link 011 1 A">011</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>
                    <div class="bigroom">
                        <div>
                            <a class="link 012 1 A">012</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>

                    <div class="row" id="roomPost">

                    </div>

                </div>

                <br>


                <div class="col-12 order-1 col-lg-6 order-md-1 order-sm-1 order-lg-1 col-xl-5 " style="margin-top: 15%">
                    <div class="row">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th scope="col">First</th>
                                    <th scope="col">Last</th>
                                    <th scope="col">Handle</th>
                                </tr>
                            </thead>
                            <tbody id="tablePos">

                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

        </div>

        <script>


            var ourRequest = new XMLHttpRequest();
            var roomPost = document.getElementById('roomPost')
            var htmlString = '';
            ourRequest.open('GET', 'http://localhost:3000/getRoom/');
            ourRequest.onload = function () {
                var ourData = JSON.parse(ourRequest.responseText);
                console.log(ourData)//data from get
                console.log(ourData.room)//data from get
                renderHTML(ourData);

                //  makeClick();
            }
            ourRequest.send();
            function renderHTML(ourData) {

                /* for (let i = 0; i < ourData.length; i++) {
                htmlString += '<tr><th scope="row">' + (i + 1) + '</th><td>' + ourData[i].personID + '</td><td>'
                    + ourData[i].firstName + '</td><td>' + ourData[i].lastName + '</td><td>' + ourData[i].phoneNumber + '</td><td>'
                    + '<img class="edit no' + (i + 1) + '" width="20px" height="20px" src="https://png.icons8.com/windows/1600/new-by-copy.png"></td><td>'
                    + '<img class="remove no' + (i + 1) + '" width="20px" height="20px" src="https://cdn0
                        <div class="bigroom">
                        <div>
                            <a class="link 012 1 A">012</a>
                        </div>
                        <div class="room">
                            <br>
                            <p>15230.5kw/h</p>
                        </div>
                    </div>    
                }*/



                for (let i = 0; i < ourData.length; i++) {
                    for (let j = 0; j != ourData[i].room_number; j++) {
                        console.log(ourData[i].room_number)

                        // htmlString += '<div class="room"> <div> <a class="link ' + (i + 1) (i + 1) + '">' + (j + 1) + '</a></div> <div class="room"><br> </div> </div>'
                        // htmlString += '<div class="room"style="background-color: pink;margin-top: 10%"></div>'+ourData[i].room_number
                    }
                    // htmlString += '<div class="room"> <div> <a class="link ' + (i + 1) (i + 1) + '">' + (j + 1) + '</a></div> <div class="room"><br> </div> </div>'
                    htmlString += '<div class="room"style="background-color: pink;margin-top: 10%"></div>' + ourData[i].room_number
                    console.log('test' + ourData[i].room_number)
                }
                roomPost.insertAdjacentHTML('beforeend', htmlString);
            }



            var links = document.getElementsByClassName("link");
            for (let i = 0; i < links.length; i++) {
                let room = links[i].classList[1]
                let floor = links[i].classList[2]
                let build = links[i].classList[3]
                links[i].setAttribute('href', 'PersonInput1.html?room=' + room + '&floor=' + floor + '&build=' + build)
                console.log(links[i])
            }
        </script>




        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
</body>

</html>
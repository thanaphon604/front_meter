<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Create Page</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <style>
        .upload-btn-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .btn-add-image {
            color: white;
            font-weight: 400;
            background-color: yellow;
            border-radius: 0.25rem;
            font-size: 1rem;
            padding: 0.375rem 1.45rem;
        }

        .btn-add-image {
            color: #212529;
            background-color: #ffc107;
            border-color: #ffc107;
        }

        .upload-btn-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
        }.divform{
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    display: inline-block;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    background-color:whitesmoke;

  }
    </style>
</head>


<body>
    <div id="blockAppend'+member+'" class="row justify-content-md-center">
        <div class="divform">
            <div class="row justify-content-center">
                <div class="col-2 col-sm-2"><br>
                    <p class="h4">ชั้น</p>
                </div>
                <div class="col-2 col-sm-2"><br>
                    <p id="">5</p>
                </div>
                <div class="col-4 col-sm-3">
                    <button onclick="Plusroom(this.id);" id="Plusroom' + member + '" style="margin-top: 6%" class="btn btn-primary "
                        type="button">เพิ่มห้อง</button>
                </div>
            </div>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th scope="col" style="background-color: grey ; height: 50px;">หมายเลขห้อง</th>
                        <th scope="col" style="background-color: grey">สถานะห้อง</th>
                        <th scope="col" style="background-color: grey">ลบข้อมูล</th>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
            <button onclick="RemoveLink(this.id);" id="removeLink' + member + '" type="button" class="btnRemoveLink btn btn-danger btn-block">Remove</button>
        </div>
    </div>




    <hr>
    <form id="myForm" class="container my-3" method="" enctype="" action="">
        <a class="bg-success d-block text-center rounded mt-4" id="newNodeButton" data-toggle="tooltip" data-placement="top"
            title="Add new node"><i class="fas fa-plus p-2" style="color:white; font-size: 14px;"></i></a>
    </form>
    <script>
        var node = []
        var member = 0
        function RemoveLink(id) {
            console.log('now node isห :', node)
            let num = id.substring(10);
            let nodeName = $('#nodeInput' + num).val()
            $('#blockAppend' + num).remove()
            //clear node data and member
            for (let i = 0; i < node.length; i++) {
                if (nodeName == node[i]) {
                    node[i] = ''
                    for (let j = i; j < node.length - 1; j++) {
                        node[j] = node[j + 1]
                    }
                    node.pop()
                    console.log('now node is :', node)
                    member--
                    break
                }
            }
        }
        function Plusroom(id) {
            let num = id.substring(10);
            let nodeName = $('#nodeInput' + num).val()
            $('#blockAppend' + num).remove()
            //clear node data and member
            for (let i = 0; i < node.length; i++) {
                if (nodeName == node[i]) {
                    node[i] = ''
                    for (let j = i; j < node.length - 1; j++) {
                        node[j] = node[j + 1]
                    }
                    node.push()
                    console.log('now node is :', node)
                    member--
                    break
                }
            }
        }


        function AppendNewNode(val1, val2, val3) {
            let appendString =
                '<div id="blockAppend' + member + '" class="row justify-content-md-center">'
                + '   <div class="divform"> '
                + ' <div class="row justify-content-center"> '
                + '  <div class="col-2 col-sm-2"><br>'
                + '  <p class="h4">ชั้น</p> '
                + '   </div> '
                + '    <div class="col-2 col-sm-2"><br> '
                + '       <p id="">5</p> '
                + '        </div> '
                + '         <div class="col-4 col-sm-3"> '
                + '           <button onclick="Plusroom(this.id);" id="Plusroom' + member + '" style="margin-top: 6%" class="btn btn-primary " type="button">เพิ่มห้อง</button> '
                + '       </div> '
                + '       </div> '
                + ' <table class="table table-bordered">'
                + ' <thead>'
                + '    <tr>'
                + '      <th scope="col" style="background-color: grey ; height: 50px;">หมายเลขห้อง</th>'
                + '     <th scope="col" style="background-color: grey">สถานะห้อง</th>'
                + '     <th scope="col" style="background-color: grey">ลบข้อมูล</th>'
                + '     </tr>'
                + '   </thead>'
                + '   <tbody>'
                + '  </tbody>'
                + '  </table>'
                + '<button onclick="RemoveLink(this.id);" id="removeLink' + member + '"type="button" class="btnRemoveLink btn btn-danger btn-block">Remove</button>'
                + ' </div> '
                + ' </div> '


            $(appendString).insertBefore('#newNodeButton')

            member++
        }

        $(document).ready(function () {

            $('#newNodeButton').on('click', function () {
                AppendNewNode('', '', '')
            })

            $('#myForm').submit(function () {
                if (CheckFormat()) {
                    alert('Chart is created Success')
                    return true;
                }
                alert('Can not create, Watch your data or images and reCreate!')
                return false
            })

        })

    </script>
</body>

</html>